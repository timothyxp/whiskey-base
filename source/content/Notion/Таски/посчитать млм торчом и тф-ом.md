---
Status: Done
Priority:
  - High
---
## Аналитика лоссов по датасетам

|   |   |   |   |   |   |   |   |
|---|---|---|---|---|---|---|---|
|Датасет|train rows, mln|Доля в трейне|Доля в валидации|torch_MLM_val|torch_mlm_acc|tf_mlm_val|tf_mlm_acc|
|[old_reform](https://yt.yandex-team.ru/arnold/navigation?path=//home/factordev/boyalex/bert/new_year_learns/simple_texts/reform_train_texts)|314|35.6%|8%|[1.762](https://nirvana.yandex-team.ru/flow/98789722-88c5-406d-807f-59ebedd86581/437c2c89-e794-4c78-98d7-a32ff068b616/graph)|[65.99](https://nirvana.yandex-team.ru/flow/98789722-88c5-406d-807f-59ebedd86581/c93e473c-c2b3-4c5d-a352-bc0d0035bdeb/graph)|[1.82](https://nirvana.yandex-team.ru/flow/ca6e30d5-57b0-42a1-b819-62c403be3163/d4258219-ed97-442d-900f-06c765c01392/graph)|[64.01](https://nirvana.yandex-team.ru/flow/ca6e30d5-57b0-42a1-b819-62c403be3163/d4258219-ed97-442d-900f-06c765c01392/graph)|
|[new_views](https://yt.yandex-team.ru/arnold/navigation?path=//home/factordev/timothyxp/bert/pretrain_datasets/sessions/user_views_texts_2211-2111_joined_pretrain/train)|256|29%|65%|[4.04](https://nirvana.yandex-team.ru/flow/98789722-88c5-406d-807f-59ebedd86581/86c451a0-bb9d-4dfd-a924-00bbdbea3917/graph)|[51.52](https://nirvana.yandex-team.ru/flow/98789722-88c5-406d-807f-59ebedd86581/6ea54c5f-faed-4350-8393-4b4c621fc3ed/graph)|[1.3](https://nirvana.yandex-team.ru/flow/ca6e30d5-57b0-42a1-b819-62c403be3163/2a422f94-cf65-4fa4-9000-dc0bbe2d46b7/graph)|[72.83](https://nirvana.yandex-team.ru/flow/ca6e30d5-57b0-42a1-b819-62c403be3163/2a422f94-cf65-4fa4-9000-dc0bbe2d46b7/graph)|
|zeliboba|312|35.4%|27%|-|-|[1.51](https://nirvana.yandex-team.ru/flow/ca6e30d5-57b0-42a1-b819-62c403be3163/64868a63-6cf1-4b07-9ce7-d616c30f9b42/graph)|[68.51](https://nirvana.yandex-team.ru/flow/ca6e30d5-57b0-42a1-b819-62c403be3163/64868a63-6cf1-4b07-9ce7-d616c30f9b42/graph)|
|total|882|100%|100%|[3.92](https://nirvana.yandex-team.ru/flow/98789722-88c5-406d-807f-59ebedd86581/1f6699a7-96fc-472d-b3a0-7232797bb34f/graph)|[51.8](https://nirvana.yandex-team.ru/flow/98789722-88c5-406d-807f-59ebedd86581/1f6699a7-96fc-472d-b3a0-7232797bb34f/graph)|[1.42](https://nirvana.yandex-team.ru/flow/ca6e30d5-57b0-42a1-b819-62c403be3163/de51b1c0-bc6e-4e68-b6b4-118387dad77a/graph)|[70.7](https://nirvana.yandex-team.ru/flow/ca6e30d5-57b0-42a1-b819-62c403be3163/de51b1c0-bc6e-4e68-b6b4-118387dad77a/graph)|

На всякий случай проверил и на торче и на тф на одном датасете, на торче пока норм сходится качество только old_reform датасета, остальные смотрю

  

ниже сравнение xlarge с xxlarge MLM+SOP на разных датасетах на тф

|   |   |   |   |   |
|---|---|---|---|---|
|Датасет|xxl_mlm|xxl_sop|xl_mlm|xl_sop|
|[old_reform](https://yt.yandex-team.ru/arnold/navigation?path=//home/factordev/boyalex/bert/new_year_learns/simple_texts/reform_train_texts)|[1.82](https://nirvana.yandex-team.ru/flow/ca6e30d5-57b0-42a1-b819-62c403be3163/d4258219-ed97-442d-900f-06c765c01392/graph)|[`0.098`](https://nirvana.yandex-team.ru/flow/ca6e30d5-57b0-42a1-b819-62c403be3163/d4258219-ed97-442d-900f-06c765c01392/graph)|[`1.89`](https://nirvana.yandex-team.ru/flow/ca6e30d5-57b0-42a1-b819-62c403be3163/17b8e4e5-253d-4a9e-b715-2b80aef01f10/graph)|[`1.03`](https://nirvana.yandex-team.ru/flow/ca6e30d5-57b0-42a1-b819-62c403be3163/17b8e4e5-253d-4a9e-b715-2b80aef01f10/graph)|
|[new_views](https://yt.yandex-team.ru/arnold/navigation?path=//home/factordev/timothyxp/bert/pretrain_datasets/sessions/user_views_texts_2211-2111_joined_pretrain/train)|[1.3](https://nirvana.yandex-team.ru/flow/ca6e30d5-57b0-42a1-b819-62c403be3163/2a422f94-cf65-4fa4-9000-dc0bbe2d46b7/graph)|[`0.03`](https://nirvana.yandex-team.ru/flow/ca6e30d5-57b0-42a1-b819-62c403be3163/2a422f94-cf65-4fa4-9000-dc0bbe2d46b7/graph)|[`3.71`](https://nirvana.yandex-team.ru/flow/ca6e30d5-57b0-42a1-b819-62c403be3163/7fe11d1a-7460-4948-a190-f83ce7510446/graph)|[`0.53`](https://nirvana.yandex-team.ru/flow/ca6e30d5-57b0-42a1-b819-62c403be3163/7fe11d1a-7460-4948-a190-f83ce7510446/graph)|
|zeliboba|[1.51](https://nirvana.yandex-team.ru/flow/ca6e30d5-57b0-42a1-b819-62c403be3163/64868a63-6cf1-4b07-9ce7-d616c30f9b42/graph)|[`0.08`](https://nirvana.yandex-team.ru/flow/ca6e30d5-57b0-42a1-b819-62c403be3163/64868a63-6cf1-4b07-9ce7-d616c30f9b42/graph)|[`3.69`](https://nirvana.yandex-team.ru/flow/ca6e30d5-57b0-42a1-b819-62c403be3163/6ea54345-244d-49b4-8a7a-ca796fe43b71/graph)|[`0.73`](https://nirvana.yandex-team.ru/flow/ca6e30d5-57b0-42a1-b819-62c403be3163/6ea54345-244d-49b4-8a7a-ca796fe43b71/graph)|
|total|[1.42](https://nirvana.yandex-team.ru/flow/ca6e30d5-57b0-42a1-b819-62c403be3163/de51b1c0-bc6e-4e68-b6b4-118387dad77a/graph)|[`0.05`](https://nirvana.yandex-team.ru/flow/ca6e30d5-57b0-42a1-b819-62c403be3163/de51b1c0-bc6e-4e68-b6b4-118387dad77a/graph)|[`3.47`](https://nirvana.yandex-team.ru/flow/ca6e30d5-57b0-42a1-b819-62c403be3163/a671ad86-2f5e-4716-ac40-fe2bbe3ac3a4/graph)|[`0.73`](https://nirvana.yandex-team.ru/flow/ca6e30d5-57b0-42a1-b819-62c403be3163/a671ad86-2f5e-4716-ac40-fe2bbe3ac3a4/graph)|

c SOP на XL что-то не то, причину не нашел